<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1">
        <meta name="description" content="">
        <title></title>
        <link rel="stylesheet" href="css/normalize.css">
        <style>
            .red    { background-color: red;}
            .blue   { background-color: blue;}
            .green  { background-color: green;}


            #wrap{
                position: absolute;
                width: 100%; height: 100%;

                -webkit-perspective  : 1000px;
                -webkit-transform-style: preserve-3d;
                -webkit-transform-origin : 50% 50%;
                -webkit-transform : translateZ(-100px);
            }

            #cube {
                position: absolute;
                left : 50%; top:50%;
                -webkit-transform-origin : 50% 50%;
                -webkit-transform-style : preserve-3d;
            }
            
            #cube [class|=plane] {
                position: absolute;
                -webkit-transform-origin : 50% 50%;
                text-align: center;
                font-size: 60px;
                /*-webkit-backface-visibility : hidden;*/
            }

            .rolling {
                -webkit-animation: rolling 50s infinite;
            }

            /*@-webkit-keyframes rolling {*/
                  /*0% { -webkit-transform: translateZ(0px) rotateY(0deg) rotateX(360deg); }*/
                /*100% { -webkit-transform: translateZ(0px) rotateY(0deg) rotateX(0deg); }*/
            /*}*/

            #cube .plane-front  { background-color: hsla(  0, 100%, 50%, 0.7); }
            #cube .plane-back   { background-color: hsla( 60, 100%, 50%, 0.7); }
            #cube .plane-right  { background-color: hsla(120, 100%, 50%, 0.7); }
            #cube .plane-left   { background-color: hsla(180, 100%, 50%, 0.7); }
            #cube .plane-top    { background-color: hsla(240, 100%, 50%, 0.7); }
            #cube .plane-bottom { background-color: hsla(300, 100%, 50%, 0.7); }

            /*#cube .plane-front    { width:400px; height:100px; -webkit-transform:                  translateZ(100px); }
            #cube .plane-back     { width:400px; height:100px; -webkit-transform: rotateX(-180deg) translateZ(100px); }
            #cube .plane-left     { width:200px; height:100px; -webkit-transform: rotateY(  -90deg) translateZ(100px); }
            #cube .plane-right    { width:200px; height:100px; -webkit-transform: rotateY(  90deg) translateZ(300px); }

            #cube .plane-top      { width:400px; height:200px; -webkit-transform: rotateX(  90deg) translateZ(100px); }
            #cube .plane-bottom   { width:400px; height:200px; -webkit-transform: rotateX( -90deg) translateZ(0px); }*/

            .rolling {
                /*-webkit-animation: rolling 2s infinite;*/
            }
            
            
            @-webkit-keyframes rolling {
                /*0% { -webkit-transform: translateZ(-50px) rotateX(0deg); }
                100% { -webkit-transform: translateZ(-50px) rotateX(360deg); }   */
            }
    
            
        </style>
        <script src="js/modernizr.custom.min.js"></script>
        <script src="js/jquery-1.10.2.min.js"></script>
        <script src="js/jquery.easing.1.3.js"></script>
        <script src="js/jquery.mousewheel.js"></script>
        <script src="js/jquery.scroll.js"></script>
        <script src="js/cube.js"></script>

        <script>
            $(document).ready(function(){
                addEvent();
                setup();
            });

            var cube,cubeWrap,inner,planes  = {};
            function setup(){
                cubeWrap    = $("#cube");
                planes      = {
                     front  : $('.plane-front'),
                     back   : $('.plane-back'),
                     left   : $('.plane-left'),
                     right  : $('.plane-right'),
                     top    : $('.plane-top'),
                     bottom : $('.plane-bottom')
                };

                cube = new CUBE(cubeWrap,planes,{width:stage.width,height:stage.height});
                // cube = new CUBE(cubeWrap,planes,{width:1000,height:800});
                var scroll = new Scroll({speed:1,step:onScroll});

            }


            var stage = {};
            function addEvent(){
                $(window).on('resize',function(){
                    stage = windowSize();
                    stage.halfW = stage.width*0.5;
                    stage.halfH = stage.height*0.5;
                })
                $(window).trigger('resize');
            };

            var rx = 0;
            function onScroll(offset){
                rx+=offset;
                cube.rolling(rx);
                // $('#cube').css({'-webkit-transform':'rotateX('+rx+'deg)'});
            }

            function windowSize(){
                var size = { width:0,height:0};
                if (document.documentElement.clientHeight) {
                    size.width = document.documentElement.clientWidth;
                    size.height = document.documentElement.clientHeight;
                } else if (document.body.clientHeight) {
                    size.width = document.body.clientWidth;
                    size.height = document.body.clientHeight;
                } else if (window.innerHeight) {
                    size.width = window.innerWidth;
                    size.height = window.innerHeight;
                }

                return size;
            }

        </script>
    </head>
    <body>
        <div id="wrap">
            <div id="cube" class="rolling">
                <div class="plane-front">front</div>
                <div class="plane-back">back</div>
                <div class="plane-left">left</div>
                <div class="plane-right">right</div>
                <div class="plane-top">top</div>
                <div class="plane-bottom">bottom</div>
            </div>
        </div>
    </body>
</html>
