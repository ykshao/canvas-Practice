<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1">
        <meta name="description" content="">
        <title></title>
        <link rel="stylesheet" href="css/normalize.css">
        <style>

            body {
                background-color: #000;
                width: 100%; height: 100%;
                padding: 0; margin : 0;
                overflow: hidden;
            }

            #img-color {
                position: absolute;
                /*left:300px;*/
                /*top:200px;*/
            }   

            div {
                position: absolute;
                width: 100%;
                height: 100%;
                background: #c00;
            }

            #canvas {
                position: absolute;
                width: auto;
                height: 100%;
            }

            #img1 {
                position: absolute;
                opacity: 0.5;
                display: none;
            }

        </style>
        <script src="js/jquery-1.10.2.min.js"></script>
        <script src="js/jquery.easing.1.3.js"></script>
        <script src="js/jquery.imgfit.js"></script>
        <script src="js/dat.gui.min.js"></script>
    </head>


    <body>
        <img id="img1" src="img/4.jpg">
        <canvas width="1024" height="580" id="cvs"></canvas>
        <script>

            $(document).ready(function(){

                var $cvs = $('#cvs'),
                    ctx = $cvs[0].getContext('2d');

                var img = $('#img1');

                var rectPos = [
                        {width:100,height:100,vertext:[],center:{x:100,y:100},type:'clip'},
                        {width:100,height:100,vertext:[],center:{x:500,y:100},type:'clip'},
                        {width:100,height:100,vertext:[],center:{x:900,y:100},type:'clip'},
                        {width:100,height:100,vertext:[],center:{x:100,y:400},type:'composite'},
                        {width:100,height:100,vertext:[],center:{x:500,y:400},type:'composite'},
                        {width:100,height:100,vertext:[],center:{x:900,y:400},type:'composite'}
                    ];

                setTimeout(function(){
                    // mask with clip
                    for(var o in rectPos){
                        var info = rectPos[o];
                        var x = info.center.x - info.width*0.5,
                            y = info.center.y - info.height*0.5;

                        ctx.save();
                        if(info.type == 'clip'){
                            ctx.rect(x,y,info.width,info.height);
                            ctx.clip();
                            ctx.drawImage(img[0],0,0);
                        }else{
                            ctx.fillRect(x,y,info.width,info.height);
                            ctx.globalCompositeOperation = 'source-in'
                            ctx.drawImage(img[0],0,0);
                            ctx.globalCompositeOperation = 'source-over'
                        }
                        ctx.restore();
                    }
                    requestAnimationFrame(render);
                },100);

                function render(){
                    requestAnimationFrame(render);
                };

            });
        </script>
    </body>
</html>



<!--  
 HTMLCanvasElement

    toDataURL()
    getContext()

 メソッド
    addColorStop()
    arc()
    arcTo()
    beginPath()
    bezierCurveTo()
    clearRect()
    clip()
    closePath()
    createImageData()
    createLinearGradient()
    createPattern()
    createRadialGradient()
    drawFocusRing()
    drawImage()
    fill()
    fillRect()
    fillText()
    getImageData()
    isPointInPath()
    lineTo()
    measureText()
    moveTo()
    putImageData()
    quadraticCurveTo()
    rect()
    restore()
    rotate()
    save()
    scale()
    setTransform()
    stroke()
    strokeRect()
    strokeText()
    translate()
    transform()

プロパティ
    fillStyle
    font
    globalAlpha
    globalCompositeOperation
    lineCap
    lineJoin
    lineWidth
    miterLimit
    shadowBlur
    shadowColor
    shadowOffsetX
    shadowOffsetY
    strokeStyle
    textAlign
    textBaseline
 */

 -->