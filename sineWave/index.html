<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1">
        <meta name="description" content="">

        <meta name="copyright" content="" />
        <meta name="description" content="" />
        <meta name="keywords" content="">
        
        <meta property="og:title" content=""/>
        <meta property="og:description" content="" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="" id="ogUrl" />
        <meta property="og:image" content="" />

        <meta name="tw_text" content="" id="twText" />
        <meta name="tw_url" content="" id="twUrl" />
        <title></title>
        
        <link rel="stylesheet" href="css/normalize.css">
        <style>
            #a {
                position: absolute;
                width: 100px;
                height: 100px;
                left:0;
                background-color: #f00;
            }
            canvas {
                width:100%; height:100%;
                background-color: rgba(100,100,100,0.5);
            }
        </style>
        <script src="js/modernizr.custom.min.js"></script>
        <script src="js/jquery-1.10.2.min.js"></script>
        <script src="js/jquery.easing.1.3.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.6.5/dat.gui.min.js"></script>
    </head>
    <body>
        <canvas id="canvas" width="500" height="100"></canvas>

        <script>
            var step = 0;
            var gui = new dat.GUI();
            var option = {
                amplitude:15,
                frequency:74,
                speed:-5,
                width:500
            }

            var canvas = document.getElementById("canvas");
            var context = canvas.getContext("2d");
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;

            gui.add(option,'amplitude');
            gui.add(option,'frequency');
            gui.add(option,'speed');
            gui.add(option,'width');

            function draw(){
                context.clearRect(0,0,canvas.width,canvas.height);
                context.save();

                plotSine(context,step,50);

                step += option.speed;
                window.requestAnimationFrame(draw);
            }

            function plotSine(ctx,xOffset, yOffset){
                // var width = ctx.canvas.width;
                var height = ctx.canvas.height;
                var scale = 20;

                ctx.beginPath();
                ctx.lineWidth = 2;
                ctx.strokeStyle = "rgb(66,44,255)";

                var x = 0;
                var y = 0;
                var amplitude = option.amplitude;
                var frequency = option.frequency;
                var ratioW = 1;

                ctx.moveTo(x, 50);

                var p;
                for(var i=0,n = option.width; i<n; i++){
                    p = i/n;
                    y = canvas.height * 0.5 + amplitude * Math.sin((i+xOffset-n*0.5)/frequency) * p * (1-p);
                    ctx.lineTo(i,y);
                }
         

                ctx.save();
                ctx.stroke();
                ctx.restore();

                drawPoint(ctx, y);
            }

            function drawPoint(ctx, y) {            
                var radius = 3;
                ctx.beginPath();
                // Hold x constant at 4 so the point only moves up and down.
                ctx.arc(0, y, radius, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'red';
                ctx.fill();
                ctx.lineWidth = 1;
                ctx.stroke();
            }

            window.addEventListener('resize',function(){
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            });

            draw();
        </script>
    </body>
</html>
